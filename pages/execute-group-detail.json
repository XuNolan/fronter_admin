{
  "type": "page",
  "title": "执行组详情",
  "initApi": "http://127.0.0.1:8080/execute-group/detail/${params.id}",
  "body": [
    {
      "type": "grid",
      "columns": [
        {
          "type": "panel",
          "title": "脚本列表（按执行顺序）",
          "className": "m-r",
          "md": 8,
          "body": [
            {
              "type": "crud",
              "source": "${scripts}",
              "syncLocation": false,
              "perPageAvailable": [10, 20, 50],
              "perPage": 10,
              "columns": [
                {
                  "name": "index",
                  "label": "执行顺序",
                  "type": "text",
                  "width": 80
                },
                {
                  "name": "usecaseName",
                  "label": "用例名",
                  "type": "text"
                },
                {
                  "name": "scriptName",
                  "label": "脚本名",
                  "type": "text"
                },
                {
                  "name": "version",
                  "label": "版本",
                  "type": "text",
                  "width": 80
                },
                {
                  "name": "isActive",
                  "label": "状态",
                  "type": "mapping",
                  "width": 80,
                  "map": {
                    "true": "<span class='label label-success'>已启用</span>",
                    "false": "<span class='label label-default'>未启用</span>"
                  }
                },
                {
                  "type": "operation",
                  "label": "操作",
                  "width": 100,
                  "buttons": [
                    {
                      "type": "button",
                      "label": "查看详情",
                      "level": "link",
                      "actionType": "link",
                      "link": "/usecase/query/${usecaseId}"
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "panel",
          "title": "执行组信息",
          "md": 4,
          "body": [
            {
              "type": "form",
              "mode": "horizontal",
              "wrapWithPanel": false,
              "body": [
                {
                  "type": "static",
                  "name": "id",
                  "label": "执行组ID"
                },
                {
                  "type": "static",
                  "name": "groupName",
                  "label": "执行组名"
                },
                {
                  "type": "static",
                  "name": "created",
                  "label": "创建时间",
                  "tpl": "${created | date:YYYY-MM-DD HH\\:mm\\:ss}"
                },
                {
                  "type": "static",
                  "name": "updated",
                  "label": "更新时间",
                  "tpl": "${updated | date:YYYY-MM-DD HH\\:mm\\:ss}"
                }
              ]
            },
            {
              "type": "divider"
            },
            {
              "type": "button",
              "label": "编辑执行组",
              "level": "primary",
              "actionType": "dialog",
              "dialog": {
                "title": "编辑执行组",
                "size": "lg",
                "body": {
                  "type": "form",
                  "api": {
                    "method": "post",
                    "url": "http://127.0.0.1:8080/execute-group/update/${params.id}"
                  },
                  "initApi": "http://127.0.0.1:8080/execute-group/detail/${params.id}",
                  "body": [
                    {
                      "type": "input-text",
                      "name": "groupName",
                      "label": "执行组名",
                      "required": true,
                      "placeholder": "请输入执行组名称"
                    },
                    {
                      "type": "combo",
                      "name": "scripts",
                      "label": "关联脚本",
                      "multiple": true,
                      "draggable": true,
                      "addable": true,
                      "removable": true,
                      "draggableTip": "拖拽调整执行顺序",
                      "addButtonText": "添加脚本",
                      "items": [
                        {
                          "type": "select",
                          "name": "scriptId",
                          "label": "选择脚本",
                          "required": true,
                          "source": {
                            "method": "get",
                            "url": "http://127.0.0.1:8080/execute-group/available-scripts",
                            "adaptor": "return payload.data;"
                          },
                          "labelField": "label",
                          "valueField": "value",
                          "searchable": true,
                          "placeholder": "选择脚本"
                        }
                      ],
                      "description": "拖拽调整顺序，第一个脚本将最先执行"
                    }
                  ],
                  "actions": [
                    {
                      "type": "button",
                      "label": "取消",
                      "actionType": "cancel"
                    },
                    {
                      "type": "submit",
                      "label": "保存",
                      "level": "primary"
                    }
                  ]
                }
              }
            },
            {
              "type": "divider"
            },
            {
              "type": "button",
              "label": "连续执行此组所有脚本",
              "level": "success",
              "size": "lg",
              "actionType": "ajax",
              "confirmText": "确认要顺序执行此组中的所有脚本吗？",
              "api": {
                "method": "post",
                "url": "http://127.0.0.1:8080/execute-group/execute/${params.id}"
              }
            },
            {
              "type": "divider"
            },
            {
              "type": "button",
              "label": "返回列表",
              "actionType": "link",
              "link": "/execute-group/list"
            }
          ]
        }
      ]
    }
  ]
}
